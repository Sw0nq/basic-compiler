# BASIC Compiler

Компилятор языка BASIC, который преобразует программы на BASIC в исполняемый Python код.

## Особенности

- Синтаксический анализатор на основе ANTLR4
- Построение и визуализация AST (Abstract Syntax Tree)
- Семантический анализ с проверкой типов
- Оптимизации кода (свертка констант, удаление мертвого кода)
- Генерация Python кода
- Поддержка всех основных конструкций BASIC:
  - Переменные с типами (%, $, !)
  - Выражения и операторы
  - Условные конструкции (IF-THEN-ELSE)
  - Циклы (FOR-NEXT, WHILE-WEND)
  - Подпрограммы (GOSUB-RETURN)
  - Метки и переходы (GOTO)
  - Ввод/вывод (PRINT, INPUT)

## Требования

- Python 3.6 или выше
- ANTLR4 Runtime для Python (`pip install antlr4-python3-runtime`)

## Установка

```bash
# Клонирование репозитория
git clone https://github.com/Sw0nq/basic-compiler.git
cd basic-compiler

# Установка зависимостей
pip install antlr4-python3-runtime
```

### Запуск компилятора

Запустить compiler.py

## Структура проекта

- `grammar/` - Грамматика ANTLR4
  - `Basic.g4` - Файл грамматики BASIC
- `src/` - Исходный код компилятора
  - `generated/` - Сгенерированные ANTLR4 файлы
  - `ast_nodes.py` - Классы узлов AST
  - `ast_builder.py` - Построитель AST из парсинг-дерева
  - `semantic_analyzer.py` - Семантический анализатор
  - `code_generator.py` - Генератор Python кода
  - `optimizers.py` - Классы оптимизаторов
  - `compiler.py` - Основной файл компилятора

## Поддерживаемая грамматика BASIC

### Операторы

- `PRINT` - Вывод на экран (`PRINT "Hello"`, `PRINT A; B`)
- `LET` - Присваивание (`LET X = 10`)
- `IF` - Условный оператор (`IF X = 10 THEN PRINT "Yes"`)
- `GOTO` - Безусловный переход (`GOTO LABEL`)
- `GOSUB` - Вызов подпрограммы (`GOSUB SUBROUTINE`)
- `RETURN` - Возврат из подпрограммы
- `FOR` - Цикл с переменной (`FOR I = 1 TO 10 STEP 2`)
- `NEXT` - Конец цикла FOR (`NEXT I`)
- `WHILE` - Цикл с условием (`WHILE X < 10`)
- `WEND` - Конец цикла WHILE
- `INPUT` - Ввод данных (`INPUT "Enter value"; X`)
- `END` - Конец программы

### Типы данных

- Числа с плавающей точкой (без суффикса)
- Целые числа (суффикс `%`)
- Строки (суффикс `$`)
- Числа с плавающей точкой одинарной точности (суффикс `!`)

### Выражения

- Арифметические операции: `+`, `-`, `*`, `/`
- Сравнения: `=`, `<>`, `<`, `>`, `<=`, `>=`
- Скобки для группировки: `(` и `)`

## Оптимизации

В компиляторе реализованы следующие оптимизации:

1. **Свертка констант** - Вычисление константных выражений на этапе компиляции
   - Пример: `LET X = 2 + 3 * 4` преобразуется в `LET X = 14`

2. **Удаление мертвого кода** - Удаление недостижимого кода
   - Пример: Код после `GOTO` или `END` исключается из результата

3. **Удаление неиспользуемых меток** - Метки, на которые нет ссылок, удаляются
